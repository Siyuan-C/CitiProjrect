<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>我的业务</title>
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="css/header.css" rel="stylesheet" type="text/css">
    <link href="css/my_transaction.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" language="JavaScript" src="javascript/jquery-3.5.1.min.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-ligh shadow">
    <a class="navbar-brand" href="#">
        <img src="resource/blackLogo.png" alt="logo">
    </a>
    <div class="collapse navbar-collapse">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item head-tag active"><a class="nav-link" href="/after_login">首页</a></li>
            <li class="nav-item head-tag"><a class="nav-link " href="/business">业务大厅</a></li>
            <li class="nav-item head-tag"><a class="nav-link " href="/about_us">关于我们</a></li>
        </ul>

        <ul class="navbar-nav">
            <li class="nav-item head-tag">
                <a class="nav-link" href="javascript:void(0);">
                    <img src="resource/u92.png" alt="app">
                    手机App
                </a>
            </li>
            <li class="nav-item head-tag">
                <a class="nav-link" href="/my_info">
                    个人中心
                </a>
            </li>
        </ul>

    </div>
</nav>
<div class="main container-fluid" id="content-background">
    <div class="transaction-info" th:each="wh, wh_status : ${wh_list}">
        <p class="transaction-head">
            <span class="transaction-serial-no info" th:text="'业务' + ${transaction_count + wh_status.index}"></span>
        </p>
        <div class="container" >
            <p class="category-info"><span class="category">货物种类：</span><span class="category-content" th:text="${wh.type}"></span></p>
            <p class="category-info"><span class="category">货物数量：</span><span class="category-content" th:text="${wh.num}"></span></p>
            <p class="category-info"><span class="category">存货人姓名：</span><span class="category-content" th:text="${wh.name}"></span></p>
            <p class="category-info"><span class="category">储存期限：</span><span class="category-content" th:text="${wh.getTime_limit() + '年'}"></span></p>
            <p class="category-info"><span class="category">储存场所：</span><span class="category-content" th:text="${wh.address}"></span></p>
<!--            <p class="category-info"><span class="category">填发人：</span><span class="category-content" th:text="">食品类</span></p>-->
            <p class="category-info"><span class="category">填发日期：</span><span class="category-content" th:text="${#dates.format(wh.date,'yyyy/MM/dd HH:mm')}"></span></p>
        </div>
        <div class="container transaction-progress-bar" th:if="${wh.status} eq 0">
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot"></div>
            <div class="line"></div>
            <div class="dot"></div>
            <div class="line"></div>
            <div class="dot"></div>
            <div class="line"></div>
            <div class="dot"></div>
            <div class="line"></div>
            <div class="dot"></div>
            <div class="line"></div>
            <div class="dot"></div>
            <div class="line"></div>
            <div class="dot"></div>
            <span class="transaction-status created">审核中</span>
        </div>
        <div class="container transaction-progress-bar" th:if="${wh.status} eq 1">
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot"></div>
            <div class="line"></div>
            <div class="dot"></div>
            <div class="line"></div>
            <div class="dot"></div>
            <div class="line"></div>
            <div class="dot"></div>
            <div class="line"></div>
            <div class="dot"></div>
            <div class="line"></div>
            <div class="dot"></div>
            <span class="transaction-status created">签署合同中</span>
        </div>
        <div class="container transaction-progress-bar" th:if="${wh.status} eq 2">
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot"></div>
            <div class="line"></div>
            <div class="dot"></div>
            <div class="line"></div>
            <div class="dot"></div>
            <div class="line"></div>
            <div class="dot"></div>
            <span class="transaction-status created">等待仓储公司确认收货</span>
        </div>
        <div class="container transaction-progress-bar" th:if="${wh.status} eq 3">
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot"></div>
            <div class="line"></div>
            <div class="dot"></div>
            <span class="transaction-status created">等待担保机构背书</span>
        </div>
        <div class="container transaction-progress-bar" th:if="${wh.status} eq 4">
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <span class="transaction-status created accomplished">已入库</span>
        </div>
        <div class="container transaction-progress-bar" th:if="${wh.status} > 4">
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <div class="line waiting-shape"></div>
            <div class="dot waiting-shape"></div>
            <span class="transaction-status created accomplished" th:if="${wh.status} eq 5">销售中</span>
            <span class="transaction-status created accomplished" th:if="${wh.status} eq 6">销售成功</span>
            <span class="transaction-status created accomplished" th:if="${wh.status} eq 7">质押中</span>
            <span class="transaction-status created accomplished" th:if="${wh.status} eq 8">质押成功</span>
        </div>
        <div th:switch="${wh.status}">
            <div class="container progress-name-bar" th:case="0">
                <div class="progress-name waiting-procedure"><span>申请</span></div>
                <div class="progress-name"><span class="waiting-for-confirm">等待审核</span></div>
                <div class="progress-name"><span>签署合同</span></div>
                <div class="progress-name"><span>发货</span></div>
                <div class="progress-name"><span>仓储公司确认收货</span></div>
                <div class="progress-name"><span>制单</span></div>
                <div class="progress-name"><span>担保机构背书</span></div>
                <div class="progress-name"><span>已生成</span></div>
            </div>
            <div class="container progress-name-bar" th:case="1">
                <div class="progress-name waiting-procedure"><span>申请</span></div>
                <div class="progress-name waiting-procedure"><span>等待审核</span></div>
                <div class="progress-name"><a th:href="'wh_contract_sign?id=' + ${wh.id}" class="waiting-for-confirm">签署合同</a></div>
                <div class="progress-name"><span>发货</span></div>
                <div class="progress-name"><span>仓储公司确认收货</span></div>
                <div class="progress-name"><span>制单</span></div>
                <div class="progress-name"><span>担保机构背书</span></div>
                <div class="progress-name"><span>已生成</span></div>
            </div>
            <div class="container progress-name-bar" th:case="2">
                <div class="progress-name waiting-procedure"><span>申请</span></div>
                <div class="progress-name waiting-procedure"><span>等待审核</span></div>
                <div class="progress-name waiting-procedure"><span>签署合同</span></div>
                <div class="progress-name waiting-procedure"><span>发货</span></div>
                <div class="progress-name"><span class="waiting-for-confirm">仓储公司确认收货</span></div>
                <div class="progress-name"><span>制单</span></div>
                <div class="progress-name"><span>担保机构背书</span></div>
                <div class="progress-name"><span>已生成</span></div>
            </div>
            <div class="container progress-name-bar" th:case="3">
                <div class="progress-name waiting-procedure"><span>申请</span></div>
                <div class="progress-name waiting-procedure"><span>等待审核</span></div>
                <div class="progress-name waiting-procedure"><span>签署合同</span></div>
                <div class="progress-name waiting-procedure"><span>发货</span></div>
                <div class="progress-name waiting-procedure"><span>仓储公司确认收货</span></div>
                <div class="progress-name waiting-procedure"><span>制单</span></div>
                <div class="progress-name"><a th:href="'guaranteeInstitution?id=' + ${wh.id}" class="waiting-for-confirm">担保机构背书</a></div>
                <div class="progress-name"><span>已生成</span></div>
            </div>
            <div class="container progress-name-bar" th:case="4">
                <div class="progress-name waiting-procedure"><span>申请</span></div>
                <div class="progress-name waiting-procedure"><span>等待审核</span></div>
                <div class="progress-name waiting-procedure"><span>签署合同</span></div>
                <div class="progress-name waiting-procedure"><span>发货</span></div>
                <div class="progress-name waiting-procedure"><span>仓储公司确认收货</span></div>
                <div class="progress-name waiting-procedure"><span>制单</span></div>
                <div class="progress-name waiting-procedure"><span>担保机构背书</span></div>
                <div class="progress-name waiting-procedure"><span>已生成</span></div>
            </div>
        </div>
        <div th:if="${wh.status} > 4">
            <div class="container progress-name-bar">
                <div class="progress-name waiting-procedure"><span>申请</span></div>
                <div class="progress-name waiting-procedure"><span>等待审核</span></div>
                <div class="progress-name waiting-procedure"><span>签署合同</span></div>
                <div class="progress-name waiting-procedure"><span>发货</span></div>
                <div class="progress-name waiting-procedure"><span>仓储公司确认收货</span></div>
                <div class="progress-name waiting-procedure"><span>制单</span></div>
                <div class="progress-name waiting-procedure"><span>担保机构背书</span></div>
                <div class="progress-name waiting-procedure"><span>已生成</span></div>
            </div>
        </div>
<!--        <hr class="transaction-divider" th:if="${wh_status.count} % 2 != 0">-->
    </div>

    <div class="container-fluid transaction-paging">
        <nav>
            <ul class="pagination justify-content-center" id="page-list">
                <li class="page-item" >
                    <a class="page-link" th:href="'/myTransaction?page=' + ${page - 1}" th:if="${page} != 1">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                    <a class="page-link" style="opacity: 0.2; cursor: not-allowed" href="javascript: void(0);" th:if="${page} == 1">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                <li th:each="page_count, page_status: ${page_amount}" class="page-item"><a class="page-link" th:href="'/myTransaction?page=' + ${page_status.count}" th:text="${page_status.count}" ></a></li>
<!--                <li class="page-item"><a class="page-link" href="/myTransaction?page=1">1</a></li>-->
<!--                <li class="page-item"><a class="page-link" href="">2</a></li>-->
                <li class="page-item">
                    <a class="page-link" href="#" th:href="'/myTransaction?page=' + ${page + 1}" th:if="${page} != ${page_max}">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                    <a class="page-link" style="opacity: 0.2; cursor: not-allowed" href="javascript: void(0);" th:if="${page} == ${page_max}">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
</div>

</body>
</html>